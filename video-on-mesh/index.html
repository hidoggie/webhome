<!DOCTYPE html>
<html lang="ko">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>video material on mesh</title>

  <script src="./../xr_st/8frame-1.4.1.min.js"></script>
  <script src="./../xr_st/xrextras.js"></script>
  <script src="./../xr_st/landing-page.js"></script>  
  
  <script async src="./../xr_st/xr.js" data-preload-chunks="slam"></script>
  <script type="module" src="./app.js" defer></script>
  <link rel="stylesheet" type="text/css" href="index.css">
  
</head>

<body>
<label id="uploadBtn" for="file" class="custom-upload" style="display: none">Add Video</label>
<input id="file" type="file" name="filename" accept="video/*">

<a-scene
  xrextras-gesture-detector
  landing-page="mediaSrc: https://i.giphy.com/media/gtfuPId8wvtfkyQ7Tc/giphy.mp4"
  xrextras-loading
  xrextras-runtime-error
  renderer="colorManagement: true"
  xrweb>

  <a-assets>
    <a-asset-item id="chair" src="./assets/glb/modern-chair.glb"></a-asset-item>
    <a-asset-item id="tv" src="./assets/glb/retro-tv.glb"></a-asset-item>
    <!-- Try more sample videos in the /assets/video/ folder -->
    <video id="vid-neon" muted autoplay crossorigin="anonymous" loop="true"
      src="./assets/video/neon-frame.mp4">
    </video>    
    <video id="vid-cat" muted autoplay playsinline loop="true" crossorigin="anonymous"
      src="./assets/video/cat-noir.mp4">
    </video>    
  </a-assets>

  <xrextras-capture-button></xrextras-capture-button>
  <xrextras-capture-config request-mic="manual" enable-end-card="false"></xrextras-capture-config>
  <xrextras-capture-preview></xrextras-capture-preview>
  
  <a-camera
    id="camera"
    position="0 8 10"
    raycaster="objects: .cantap"
    cursor="fuse: false; rayOrigin: mouse;">
  </a-camera>
  
  <a-entity
    xr-light
    light="
      type: directional;
      castShadow: true;
      shadowMapHeight:2048;
      shadowMapWidth:2048;
      shadowCameraTop: 20;
      shadowCameraBottom: -20;
      shadowCameraRight: 20;
      shadowCameraLeft: -20;
      target: #camera"
    xrextras-attach="target: camera; offset: 8 15 4"
    position="1 4.3 2.5"
    shadow>
  </a-entity>
  
  <a-light
    xr-light="max: 0.5"
    type="ambient">
  </a-light>

  <a-entity 
    id="group"
    geometry="primitive: box; width: 8; height: 8; depth: 4;"
    material="transparent: true; opacity: 0.0; depthTest: false"
    xrextras-pinch-scale="max: 2"
    xrextras-two-finger-rotate
    xrextras-hold-drag="riseHeight: 1">

    <a-entity 
      id="chairModel"
      gltf-model="#chair"
      video-texture="video: #vid-neon"
      position="-2 0 0"
      rotation="0 55 0"
      scale="3 3 3"
      shadow="receive: false"
    ></a-entity>
  
    <a-entity 
      id="tvModel"
      gltf-model="#tv"
      video-texture-camera-roll="video: #vid-cat"
      position="2 0 0"
      rotation="0 -55 0"
      scale="3 3 3"
      reflections="type: realtime"
      shadow="receive: false"
    ></a-entity>
  
  </a-entity>

  <a-plane
    id="ground"
    rotation="-90 0 0"
    width="100"
    height="100"
    material="shader: shadow; opacity: 0.5;"
    shadow
  ></a-plane>
</a-scene>
</body>
</html>
