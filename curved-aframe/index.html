<!DOCTYPE html>
<html lang="ko">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta charset="UTF-8">
  <title>curved-aframe</title>

  <script src="./../xr_st/8frame-1.5.0.min.js"></script>
  <script src="./../xr_st/xrextras.js"></script>
  <script src="./../xr_st/landing-page.js"></script>  
  
  <script async src="./../xr_st/xr.js" data-preload-chunks="slam"></script>
  <!--script src="./aframe-hologram-shader.js"></script-->
  <script>
     const onxrloaded = async () => {
       const res = await fetch('./curved-target-ar.json')
       const json = await res.json()
       const res1 = await fetch('./curved-target-wine.json')
       const json1 = await res1.json()

       XR8.XrController.configure({
         imageTargetData: [json, json1],
       })
     }
     window.XR8 ? onxrloaded() : window.addEventListener('xrloaded', onxrloaded)

  </script>

</head>

<body>
<a-scene
  landing-page
  xrextras-loading
  xrextras-runtime-error
  renderer="colorManagement: true; physicallyBasedRendering: true;"
  xrweb="disableWorldTracking: true">
  
  <a-assets>
    <a-asset-item id="bean-glb" src="./assets/Models/kidney_bean.glb"></a-asset-item>
    <a-asset-item id="blades-glb" src="./assets/Models/magic_ring.glb"></a-asset-item>
    <a-asset-item id="words-glb" src="./assets/Models/error_text.glb"></a-asset-item>
    <img id="logo" src="./assets/Media/sleeve-logo.png">
    <video
      id="wine-label-video"
      crossorigin="anonymous"
      loop="true"
      src="./assets/Media/wine-label-video.mp4">
    </video>
  </a-assets>

  <a-camera
    position="0 1 1"
    raycaster="objects: .cantap"
    cursor="fuse: false; rayOrigin: mouse;">
  </a-camera>

  <a-light type="directional" intensity="1.5" position="0 1 0"></a-light>

  <a-light type="ambient" intensity="0.25"></a-light>
  
  <!-- WINE LABEL (Cylindrical): video fades in on label -->
  <xrextras-named-image-target name="curved-target-wine">
    <xrextras-target-video-fade video="#wine-label-video"></xrextras-target-video-fade>
  </xrextras-named-image-target>

  <!-- COFFEE SLEEVE (Conical): 3D models inside and outside container -->
  <xrextras-named-image-target name="curved-target-ar">
    <xrextras-curved-target-container color="#000"></xrextras-curved-target-container>
    <xrextras-target-mesh width="0.8" material="src: #logo; transparent: true;"></xrextras-target-mesh>
    <a-entity gltf-model="#bean-glb" position="0 -0.5 0" scale="0.5 0.5 0.5" xrextras-spin></a-entity>
    <a-entity gltf-model="#blades-glb" position="0 -0.45 0" scale="0.13 0.13 0.13" xrextras-spin="speed: 1000"></a-entity>
    <a-entity gltf-model="#words-glb" position="0 -0.25 0" scale="0.2 0.2 0.2" xrextras-spin="speed: 5000; direction: reverse;"></a-entity>
  </xrextras-named-image-target>
  
</a-scene>
</body>
</html>




